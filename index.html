<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Telegram Mini App Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- REQUIRED -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
    body {
        margin: 0;
        padding: 16px;
        font-family: system-ui, -apple-system, BlinkMacSystemFont;
        background: #111;
        color: #fff;
    }
    .ok { color: #3cff88; }
    .bad { color: #ff6b6b; }
    pre {
        background: #000;
        padding: 12px;
        border-radius: 8px;
        overflow-x: auto;
        font-size: 12px;
    }
</style>
</head>

<body>

<h2>Telegram Mini App Status</h2>
<div id="status"></div>

<h3>WebApp object</h3>
<pre id="dump"></pre>

<h3>initDataUnsafe</h3>
<pre id="init"></pre>

<script>
(function () {
    const status = document.getElementById("status");
    const dump = document.getElementById("dump");
    const init = document.getElementById("init");

    if (!window.Telegram || !Telegram.WebApp) {
        status.innerHTML = '<span class="bad">Telegram WebApp NOT detected</span>';
        return;
    }

    const tg = Telegram.WebApp;

    // VERY IMPORTANT
    tg.ready();

    status.innerHTML = `
        <div class="ok">Telegram WebApp detected</div>
        <div>Platform: ${tg.platform}</div>
        <div>Version: ${tg.version}</div>
        <div>Color scheme: ${tg.colorScheme}</div>
        <div>Is expanded: ${tg.isExpanded}</div>
    `;

    dump.textContent = JSON.stringify({
        platform: tg.platform,
        version: tg.version,
        colorScheme: tg.colorScheme,
        isExpanded: tg.isExpanded,
        viewportHeight: tg.viewportHeight,
        viewportStableHeight: tg.viewportStableHeight,
        themeParams: tg.themeParams
    }, null, 2);

    init.textContent = JSON.stringify(tg.initDataUnsafe, null, 2);

    // INLINE MODE PROOF
    tg.sendData(JSON.stringify({
        source: "inline",
        ts: Date.now()
    }));
})();
</script>

</body>
</html>
